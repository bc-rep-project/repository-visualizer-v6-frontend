<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Repository Visualizer Theme Test</title>
  <style>
    :root {
      --light-bg: #ffffff;
      --light-text: #333333;
      --dark-bg: #1a202c;
      --dark-text: #f7fafc;
    }
    
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
      background-color: var(--light-bg);
      color: var(--light-text);
    }
    
    html.dark body {
      background-color: var(--dark-bg);
      color: var(--dark-text);
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .card {
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      background-color: #f8fafc;
      transition: background-color 0.3s;
    }
    
    html.dark .card {
      background-color: #2d3748;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }
    
    button {
      background-color: #3182ce;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
      transition: background-color 0.3s;
    }
    
    button:hover {
      background-color: #2c5282;
    }
    
    html.dark button {
      background-color: #4299e1;
    }
    
    html.dark button:hover {
      background-color: #3182ce;
    }
    
    .status {
      margin-top: 20px;
      padding: 10px;
      border-radius: 5px;
      background-color: #edf2f7;
    }
    
    html.dark .status {
      background-color: #2d3748;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Repository Visualizer Theme Test</h1>
    
    <div class="card">
      <h2>Current Theme Settings</h2>
      <p>Use the buttons below to test different theme modes:</p>
      
      <div>
        <button onclick="updateTheme('light')">Light Mode</button>
        <button onclick="updateTheme('dark')">Dark Mode</button>
        <button onclick="updateTheme('system')">System Mode</button>
        <button onclick="toggleTheme()">Toggle Theme</button>
      </div>
      
      <div class="status" id="status">
        <p>Current theme: <span id="current-theme">Loading...</span></p>
        <p>Last API response: <span id="api-response">None</span></p>
      </div>
    </div>
    
    <div class="card">
      <h2>Sample Content</h2>
      <p>This is example content to demonstrate theme changes. The styling of this page will update based on the selected theme.</p>
      <p>In a real application, all components would respond to the theme change, providing a consistent user experience.</p>
    </div>
  </div>

  <script src="test-theme.js"></script>
  <script>
    // Initialize and display current theme
    async function displayCurrentTheme() {
      const settings = await fetchSettings();
      if (settings && settings.theme) {
        document.getElementById('current-theme').textContent = settings.theme.mode;
        applyTheme(settings.theme.mode);
      }
    }
    
    // Override updateTheme to update UI
    const originalUpdateTheme = updateTheme;
    updateTheme = async function(mode) {
      const result = await originalUpdateTheme(mode);
      if (result) {
        document.getElementById('current-theme').textContent = result.theme.mode;
        document.getElementById('api-response').textContent = JSON.stringify(result.theme);
        applyTheme(result.theme.mode);
      }
      return result;
    };
    
    // Initialize on page load
    displayCurrentTheme();
  </script>
</body>
</html> 